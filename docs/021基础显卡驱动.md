# 基础显卡驱动

## 显卡模式

- CGA (Color Graphics Adapter)

       - 80 * 25
- EGA (Enhanced Graphics Adapter)
- MCGA (Multi Color Graphics Array)

## CRTC (Cathode Ray Tube Controller)

CGA 使用的 MC6845 芯片；

- CRT 地址寄存器 0x3D4
- CRT 数据寄存器 0x3D5
- CRT 光标位置 - 高位 0xE
- CRT 光标位置 - 低位 0xF
- CRT 显示开始位置 - 高位 0xC
- CRT 显示开始位置 - 低位 0xD

## 控制字符

控制字符是指 ASCII 码表开头的 32 个字符 (0x00 ~ 0x1F) 以及 DEL(0x7F)；

通常一个指定类型的终端都会采用其中的一个子集作为控制字符，而其它的控制字符将不起作用。例如，对于 VT100 终端所采用的控制字符如下表所示：

| 控制字符 | 八进制 | 十六进制 | 描述                                                                 |
| -------- | ------ | -------- | -------------------------------------------------------------------- |
| NUL      | 0      | 0x00     | 在输入时忽略，不保存在输入缓冲中                                     |
| ENQ      | 5      | 0x05     | 传送应答消息                                                         |
| BEL      | 7      | 0x07     | 从键盘发声响                                                         |
| BS       | 10     | 0x08     | 将光标移向左边一个字符位置处；若光标已经处在左边沿，则无动作         |
| HT       | 11     | 0x09     | 将光标移到下一个制表位；若右侧已经没有制表位，则移到右边缘处         |
| LF       | 12     | 0x0A     | 此代码导致一个回车或换行操作                                         |
| VT       | 13     | 0x0B     | 作用如LF                                                             |
| FF       | 14     | 0x0C     | 作用如LF                                                             |
| CR       | 15     | 0x0D     | 将光标移到当前行的左边缘处                                           |
| SO       | 16     | 0x0E     | 使用由 SCS 控制序列设计的 G1 字符集                                  |
| SI       | 17     | 0x0F     | 选择 G0 字符集，由 ESC 序列选择                                      |
| XON      | 21     | 0x11     | 使终端重新进行传输                                                   |  |
| XOFF     | 23     | 0x13     | 使中断除发送 XOFF  和 XON 以外，停止发送其它所有代码                 |
| CAN      | 30     | 0x18     | 如果在控制序列期间发送，则序列不会执行而立刻终止，同时会显示出错字符 |
| SUB      | 32     | 0x1A     | 作用同 CAN                                                           |  |
| ESC      | 33     | 0x1B     | 产生一个控制序列                                                     |  |
| DEL      | 177    | 0x7F     | 在输入时忽略 不保存在输入缓冲中                                      |

## 控制序列

控制序列已经由 ANSI(American National Standards Institute 美国国家标准局)制定为标准： X3.64-1977

控制序列是指由一些非控制字符构成的一个特殊字符序列，终端在收到这个序列时并不是将它们直接显示在屏幕上，而是采取一定的控制操作，比如：

- 移动光标
- 删除字符
- 删除行
- 插入字符
- 插入行
