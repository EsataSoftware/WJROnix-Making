# 随笔

进程的建立, pcb 的建立

- 创建虚拟空间
- 建立虚拟空间与可执行文件的映射关系
- 将指令放入cpu 的程序计数器去根据顺序去执行

在可执行文件中会将具有相同访问权限的段进行合并，从而减少内存碎片，

- 可读可执行
- 可读可写
- 只读

在进行映射虚拟地址的时候，会给进程的虚拟空间划分多个虚拟内存区域 VMA ，不同的 VMA 负责不同类型的 segment 以及堆栈空间也是由 VMA 管理的 ，

- vdso 负责进程与内核的通信

VMA 类型

- 代码VMA  只读
- 数据VMA  可读可写
- 堆VMA    向上扩展
- 栈VMA    向下扩展

动态链接与静态链接
静态链接 ： 需要在库文件与源文件放入内存中，执行的时候再将整个放入内存进行编译
动态链接: 先进行编译，在运行的时候再进行链接

- linux 中是.so
- windows 中是.dll
可执行文件和.so 与.dll都一样都是可以直接运行

重定位 基址重置

- 在程序放入内存时，每次都是不一样的，所以需要重新定位初始值，才能根据初始地址段和偏移量得到程序所在的内存

可执行文件的映像
可执行文件中的数据段，代码段等各种相关段。

incline

防止cpp中的小函数反复占用栈空间，优化效率